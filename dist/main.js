!function(){"use strict";!function(){var t=class{constructor(t){this.pixel=t.pixel,this.ctx=t.ctx,this.x=t.x,this.y=t.y,this.pos=[this.x,this.y],this.diameter=t.diameter,this.radius=t.diameter/2,this.borderWidth=.5,this.moveOffsetX=0,this.moveOffsetY=0}isColisionWith(t){var e,n;return e=this.pos,n=t.pos,Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1],n[1],2))<this.radius+t.radius}draw(){this.ctx.beginPath(),this.ctx.arc(this.x+this.radius,this.y+this.radius,this.radius,0,2*Math.PI),this.ctx.fillStyle=`rgba(${this.pixel[0]}, ${this.pixel[1]}, ${this.pixel[2]}, ${this.pixel[3]/255})`,this.ctx.fill(),this.ctx.strokeStyle=this.pixel,this.ctx.lineWidth=this.borderWidth,this.ctx.stroke()}moveOffset(){this.moveOffsetX=2*Math.random()-1,this.moveOffsetY=2*Math.random()-1}move(){this.x+=this.moveOffsetX,this.y+=this.moveOffsetY,this.draw()}},e=class{constructor(t,e,n){this.sourceCanvas=t,this.sourceCtx=e,this.sourceImage=n,this.imgSize=500,this.sourceCanvas.width=this.imgSize,this.sourceCanvas.height=this.imgSize,this.orbs={}}showImg(){this.sourceImage.onload=()=>{this.sourceCtx.drawImage(this.sourceImage,0,0,this.imgSize,this.imgSize)}}pixelize(e,n){this.sourceImage.onload=()=>{e.width=this.imgSize,e.height=this.imgSize,this.sourceCtx.drawImage(this.sourceImage,0,0,this.imgSize,this.imgSize);const o={};for(let e=0;e<this.sourceCanvas.height;e+=5)for(let r=0;r<this.sourceCanvas.width;r+=5){o.pixel=this.sourceCtx.getImageData(r,e,1,1).data,o.ctx=n,o.x=r,o.y=e,o.diameter=5;const i=new t(o);this.orbs[[r,e]]=i,i.draw()}this.mouseMove(e),this.animate()}}mouseMove(t){this.targetCanvas=t,this.targetCtx=t.getContext("2d"),this.targetCanvas.addEventListener("mousemove",this.handlePixelizeMoveOver.bind(this))}handlePixelizeMoveOver(t){const e=document.getElementsByClassName("pixilize-canvas")[0].getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;let r=null,i=1/0;for(const t of Object.values(this.orbs)){const e=Math.sqrt((n-t.x)**2+(o-t.y)**2);e<i&&(i=e,r=t)}r&&r.moveOffset()}draw(){this.targetCtx.clearRect(0,0,this.targetCanvas.width,this.targetCanvas.height),Object.values(this.orbs).forEach((t=>{t.move()}))}animate(){this.draw(),requestAnimationFrame(this.animate.bind(this))}};if(!n)var n={map:function(t,e){var n={};return e?t.map((function(t,o){return n.index=o,e.call(n,t)})):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(t,o,r){return n.index=r,t+e.call(n,o)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?n.map(t,e):t)}};var o=function(){var t=5,e=8-t;function o(e,n,o){return(e<<2*t)+(n<<t)+o}function r(t){var e=[],n=!1;function o(){e.sort(t),n=!0}return{push:function(t){e.push(t),n=!1},peek:function(t){return n||o(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return n||o(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return n||o(),e}}}function i(t,e,n,o,r,i,a){var s=this;s.r1=t,s.r2=e,s.g1=n,s.g2=o,s.b1=r,s.b2=i,s.histo=a}function a(){this.vboxes=new r((function(t,e){return n.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function s(t,e){if(e.count()){var r=e.r2-e.r1+1,i=e.g2-e.g1+1,a=n.max([r,i,e.b2-e.b1+1]);if(1==e.count())return[e.copy()];var s,c,u,h,l=0,d=[],f=[];if(a==r)for(s=e.r1;s<=e.r2;s++){for(h=0,c=e.g1;c<=e.g2;c++)for(u=e.b1;u<=e.b2;u++)h+=t[o(s,c,u)]||0;d[s]=l+=h}else if(a==i)for(s=e.g1;s<=e.g2;s++){for(h=0,c=e.r1;c<=e.r2;c++)for(u=e.b1;u<=e.b2;u++)h+=t[o(c,s,u)]||0;d[s]=l+=h}else for(s=e.b1;s<=e.b2;s++){for(h=0,c=e.r1;c<=e.r2;c++)for(u=e.g1;u<=e.g2;u++)h+=t[o(c,u,s)]||0;d[s]=l+=h}return d.forEach((function(t,e){f[e]=l-t})),function(t){var n,o,r,i,a,c=t+"1",u=t+"2",h=0;for(s=e[c];s<=e[u];s++)if(d[s]>l/2){for(r=e.copy(),i=e.copy(),a=(n=s-e[c])<=(o=e[u]-s)?Math.min(e[u]-1,~~(s+o/2)):Math.max(e[c],~~(s-1-n/2));!d[a];)a++;for(h=f[a];!h&&d[a-1];)h=f[--a];return r[u]=a,i[c]=r[u]+1,[r,i]}}(a==r?"r":a==i?"g":"b")}}return i.prototype={volume:function(t){var e=this;return e._volume&&!t||(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(t){var e=this,n=e.histo;if(!e._count_set||t){var r,i,a,s=0;for(r=e.r1;r<=e.r2;r++)for(i=e.g1;i<=e.g2;i++)for(a=e.b1;a<=e.b2;a++)s+=n[o(r,i,a)]||0;e._count=s,e._count_set=!0}return e._count},copy:function(){var t=this;return new i(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var n=this,r=n.histo;if(!n._avg||e){var i,a,s,c,u=0,h=1<<8-t,l=0,d=0,f=0;for(a=n.r1;a<=n.r2;a++)for(s=n.g1;s<=n.g2;s++)for(c=n.b1;c<=n.b2;c++)u+=i=r[o(a,s,c)]||0,l+=i*(a+.5)*h,d+=i*(s+.5)*h,f+=i*(c+.5)*h;n._avg=u?[~~(l/u),~~(d/u),~~(f/u)]:[~~(h*(n.r1+n.r2+1)/2),~~(h*(n.g1+n.g2+1)/2),~~(h*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var n=this,o=t[0]>>e;return gval=t[1]>>e,bval=t[2]>>e,o>=n.r1&&o<=n.r2&&gval>=n.g1&&gval<=n.g2&&bval>=n.b1&&bval<=n.b2}},a.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,n=0;n<e.size();n++)if(e.peek(n).vbox.contains(t))return e.peek(n).color;return this.nearest(t)},nearest:function(t){for(var e,n,o,r=this.vboxes,i=0;i<r.size();i++)((n=Math.sqrt(Math.pow(t[0]-r.peek(i).color[0],2)+Math.pow(t[1]-r.peek(i).color[1],2)+Math.pow(t[2]-r.peek(i).color[2],2)))<e||void 0===e)&&(e=n,o=r.peek(i).color);return o},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return n.naturalOrder(n.sum(t.color),n.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var o=t.length-1,r=t[o].color;r[0]>251&&r[1]>251&&r[2]>251&&(t[o].color=[255,255,255])}},{quantize:function(c,u){if(!c.length||u<2||u>256)return!1;var h=function(n){var r,i=new Array(1<<3*t);return n.forEach((function(t){r=o(t[0]>>e,t[1]>>e,t[2]>>e),i[r]=(i[r]||0)+1})),i}(c);h.forEach((function(){}));var l=function(t,n){var o,r,a,s=1e6,c=0,u=1e6,h=0,l=1e6,d=0;return t.forEach((function(t){(o=t[0]>>e)<s?s=o:o>c&&(c=o),(r=t[1]>>e)<u?u=r:r>h&&(h=r),(a=t[2]>>e)<l?l=a:a>d&&(d=a)})),new i(s,c,u,h,l,d,n)}(c,h),d=new r((function(t,e){return n.naturalOrder(t.count(),e.count())}));function f(t,e){for(var n,o=t.size(),r=0;r<1e3;){if(o>=e)return;if(r++>1e3)return;if((n=t.pop()).count()){var i=s(h,n),a=i[0],c=i[1];if(!a)return;t.push(a),c&&(t.push(c),o++)}else t.push(n),r++}}d.push(l),f(d,.75*u);for(var g=new r((function(t,e){return n.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));d.size();)g.push(d.pop());f(g,u);for(var v=new a;g.size();)v.push(g.pop());return v}}}().quantize,r=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t.naturalWidth,this.height=this.canvas.height=t.naturalHeight,this.context.drawImage(t,0,0,this.width,this.height)};r.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var a=function(){};a.prototype.getColor=function(t,e){return void 0===e&&(e=10),this.getPalette(t,5,e)[0]},a.prototype.getPalette=function(t,e,n){var i=function(t){var e=t.colorCount,n=t.quality;if(void 0!==e&&Number.isInteger(e)){if(1===e)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");e=Math.max(e,2),e=Math.min(e,20)}else e=10;return(void 0===n||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:e,quality:n}}({colorCount:e,quality:n}),a=new r(t),s=function(t,e,n){for(var o,r,i,a,s,c=t,u=[],h=0;h<e;h+=n)r=c[0+(o=4*h)],i=c[o+1],a=c[o+2],(void 0===(s=c[o+3])||s>=125)&&(r>250&&i>250&&a>250||u.push([r,i,a]));return u}(a.getImageData().data,a.width*a.height,i.quality),c=o(s,i.colorCount);return c?c.palette():null},a.prototype.getColorFromUrl=function(t,e,n){var o=this,r=document.createElement("img");r.addEventListener("load",(function(){var i=o.getPalette(r,5,n);e(i[0],t)})),r.src=t},a.prototype.getImageData=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var n=new Array(i),o=0;o<t.length;o++)n[o]=String.fromCharCode(t[o]);var r=n.join(""),a=window.btoa(r);e("data:image/png;base64,"+a)}},n.send()},a.prototype.getColorAsync=function(t,e,n){var o=this;this.getImageData(t,(function(t){var r=document.createElement("img");r.addEventListener("load",(function(){var t=o.getPalette(r,5,n);e(t[0],this)})),r.src=t}))};var s=function(t){const e=new a;t.onload=function(){const n=e.getPalette(t,5).map((t=>`rgb(${t[0]}, ${t[1]}, ${t[2]})`));console.log(n),function(t){const e=document.getElementById("colorContainer"),n=document.querySelectorAll(".color-box");if(t.forEach(((t,o)=>{let r;n.length>o?(r=n[o],r.style.backgroundColor=t):(r=document.createElement("div"),r.style.backgroundColor=t,r.classList.add("color-box"),r.setAttribute("data-rgb",t),r.addEventListener("click",(()=>{const t=r.getAttribute("data-rgb");navigator.clipboard.writeText(t).then((()=>{window.alert(`Color ${t} copied to clipboard`)})).catch((t=>{console.error("Failed to copy text:",t)}))})),e.appendChild(r))})),n.length>t.length)for(let e=t.length;e<n.length;e++)n[e].remove()}(n)}};function c(t){const n=t.target.files[0],o=URL.createObjectURL(n),r=new Image;r.src=o;const i=document.getElementById("sourceCanvas"),a=i.getContext("2d");new e(i,a,r).showImg(),document.getElementById("extractColorButton").addEventListener("click",u),document.getElementById("pixilizeImgButton").addEventListener("click",h)}function u(){const t=document.getElementById("sourceCanvas"),e=(t.getContext("2d"),t.toDataURL("image/png")),n=new Image;n.src=e,s(n)}function h(){const t=document.getElementById("sourceCanvas"),n=t.getContext("2d"),o=t.toDataURL("image/png"),r=new Image;r.src=o;const i=new e(t,n,r);let a;const s=document.getElementById("canvasDiv"),c=document.querySelectorAll(".pixilize-canvas");c.length<1?(a=document.createElement("canvas"),a.classList.add("pixilize-canvas"),s.appendChild(a)):a=c[0];const u=a.getContext("2d");i.pixelize(a,u)}function l(){const t=document.querySelectorAll("#particles-js")[0],e=document.querySelectorAll(".intro-modal")[0],n=document.querySelectorAll(".container")[0],o=document.querySelectorAll(".dropdown")[0];t.style.zIndex=-2,e.style.display="none",n.style.zIndex=3,o.style.zIndex=3}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("start-button").addEventListener("click",l),document.getElementById("uploadInput").addEventListener("change",c)}))}()}();
//# sourceMappingURL=main.js.map